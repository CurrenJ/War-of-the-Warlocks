package Backgrounds;

import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

import Graphics.BackgroundGraphics;
import Graphics.EntityGraphics;

public class ParallaxBackgroundSet {
	String prefix;
	JPanel panel;
	int layers;
	
	public ParallaxBackgroundSet(String prefix, int layers, JPanel panel){
		this.prefix = prefix;
		this.panel = panel;
		this.layers = layers;
		
		for(int l = 0; l < layers; l++)
		if(!BackgroundGraphics.backgroundImages.containsKey(prefix + "_" + l)){
			try {
				BackgroundGraphics.backgroundImages.put(prefix + "_" + l, ImageIO.read(new URL("file:" + prefix + "_" + l +".png")));
			} catch (Exception e){}
		}
		
		scaleToWindow(true);
	}
	
	public void scaleToWindow(boolean printInfo){
		if(printInfo)
			System.out.print("Resizing background \"" + prefix + "\" to fit window size ");
		int imgWidth = BackgroundGraphics.backgroundImages.get(prefix + "_0").getWidth(panel);
		int imgHeight = BackgroundGraphics.backgroundImages.get(prefix + "_0").getHeight(panel);
		
		int windowWidth = panel.getWidth();
		int windowHeight = panel.getHeight();
		
		
		if(imgWidth > imgHeight){
			int ratio = windowWidth / imgWidth;
			if(imgHeight * ratio > windowHeight){
				ratio = windowHeight / imgHeight;
				imgHeight = windowHeight * ratio;
				imgWidth = windowWidth * ratio;
			}
		}
		else if(imgHeight > imgWidth){
			int ratio = windowHeight / imgHeight;
			if(imgWidth * ratio > windowWidth){
				ratio = windowWidth / imgWidth;
				imgWidth = windowWidth * ratio;
				imgHeight = windowHeight * ratio;
			}
		}
		if(printInfo)
			System.out.println(windowWidth + " x " + windowHeight);
	}
	
//	public void scaleToParams(int width, int height){
//		if(printInfo)
//			System.out.print("Resizing background \"" + prefix + "\" to fit window size ");
//		int imgWidth = BackgroundGraphics.backgroundImages.get(prefix + "_0").getWidth(panel);
//		int imgHeight = BackgroundGraphics.backgroundImages.get(prefix + "_0").getHeight(panel);
//		if(printInfo)
//			System.out.println(windowWidth + " x " + windowHeight);
//	}
	
	public void addToBackgrounds(){
		
	}

	public String getPrefix() {
		return prefix;
	}

	public void setPrefix(String prefix) {
		this.prefix = prefix;
	}
}
